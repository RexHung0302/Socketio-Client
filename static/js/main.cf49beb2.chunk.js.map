{"version":3,"sources":["logo.svg","App.tsx","pages/Lobby/DrawerContent.tsx","pages/Lobby/index.tsx","assets/images/bg.png","assets/images/defaultUser.png","pages/ChatRoom/index.tsx","routers/index.ts","routers/RouteWithSubRoutes.tsx","pages/index/index.tsx","reportWebVitals.ts","index.tsx"],"names":["App","history","useHistory","data","useContext","StateContext","useState","openSnackbar","setOpenSnackbar","className","src","logo","alt","Stack","spacing","TextField","id","label","variant","placeholder","helperText","state","name","error","onChange","e","setState","preVal","target","value","Button","onClick","push","style","backgroundColor","Snackbar","anchorOrigin","vertical","horizontal","open","onClose","autoHideDuration","Alert","severity","sx","width","DrawerContent","toggleDrawer","userNumber","openCreateModalHandler","Box","role","onKeyDown","List","ListItem","button","ListItemIcon","ListItemText","primary","display","flexDirection","fontSize","Divider","ws","undefined","isLogout","selectChatRoom","emit","ContainerDivStyled","styled","div","Lobby","bottomDrawer","setBottomDrawer","snackbar","setSnackbar","loading","setLoading","setUserNumber","chatRooms","setChatRooms","isDialogOpen","setIsDialogOpen","newChatRoom","setNewChatRoom","useEffect","newSocket","io","process","transports","uuidv4","console","log","initWebSocket","message","setTimeout","useCallback","once","on","dataInfo","text","toggleDialogHandler","desc","Drawer","anchor","Dialog","DialogTitle","DialogContent","DialogContentText","autoFocus","margin","type","fullWidth","DialogActions","userId","map","chatRoom","idx","pathname","joinChatRoomHandler","bgPng","routers","path","component","exact","moment","require","inputMsg","setInputMsg","messages","setMessages","roomId","disconnectChatRoomHandler","create_at","renderMessageHandler","defaultUser","color","format","modeInfo","mode","RouteWithSubRoutes","route","render","props","routes","createContext","Index","chatRoomInfo","Provider","basename","i","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cf49beb2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, { useContext, useState } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport { useHistory } from \"react-router\";\n\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Stack from \"@mui/material/Stack\";\n\nimport { StateContext } from \"./pages/index\";\nimport { Alert, Snackbar } from \"@mui/material\";\n\nfunction App() {\n  const history = useHistory();\n  const data = useContext(StateContext);\n  const [openSnackbar, setOpenSnackbar] = useState<boolean>(false);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <Stack spacing={3}>\n          <TextField\n            id=\"name\"\n            label=\"您的大名\"\n            variant=\"standard\"\n            placeholder=\"輸入名稱進入聊天\"\n            helperText={data?.state?.name === \"\" ? \"名稱為必填\" : \"\"}\n            error={data?.state.name === \"\" ? true : false}\n            onChange={(e) => {\n              data?.setState(\n                (preVal) =>\n                  (preVal = {\n                    ...preVal,\n                    name: e.target.value,\n                  })\n              );\n            }}\n          />\n          <Stack spacing={1}>\n            <Button\n              variant=\"contained\"\n              onClick={() => {\n                if (data?.state.name) {\n                  history.push(\"/lobby\");\n                }\n              }}\n            >\n              進入聊天室\n            </Button>\n            <Button\n              style={{\n                backgroundColor: \"#00c300\",\n              }}\n              variant=\"contained\"\n              onClick={() => {\n                setOpenSnackbar(true);\n              }}\n            >\n              Line Login\n            </Button>\n            <Button\n              style={{\n                backgroundColor: \"#1877f2\",\n              }}\n              variant=\"contained\"\n              onClick={() => {\n                setOpenSnackbar(true);\n              }}\n            >\n              Facebook Login\n            </Button>\n          </Stack>\n        </Stack>\n      </header>\n      <Snackbar\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n        open={openSnackbar}\n        onClose={() => setOpenSnackbar(false)}\n        key={0}\n        autoHideDuration={2000}\n      >\n        <Alert\n          onClose={() => setOpenSnackbar(false)}\n          severity=\"info\"\n          sx={{ width: \"100%\" }}\n        >\n          功能尚未開放!\n        </Alert>\n      </Snackbar>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useContext } from \"react\";\nimport { useHistory } from \"react-router\";\n\nimport { StateContext } from \"../index\";\n\n// Components\nimport {\n  ListItem,\n  ListItemIcon,\n  List,\n  Box,\n  ListItemText,\n  Divider,\n} from \"@mui/material\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport PeopleIcon from \"@material-ui/icons/People\";\n\n// TS\ninterface Props {\n  toggleDrawer: () => void;\n  userNumber: number;\n  openCreateModalHandler: () => void;\n}\n\n// 抽屜內容\nconst DrawerContent: React.FC<Props> = ({\n  toggleDrawer,\n  userNumber,\n  openCreateModalHandler,\n}: Props) => {\n  const data = useContext(StateContext);\n  const history = useHistory();\n\n  return (\n    <Box\n      role=\"presentation\"\n      onClick={() => toggleDrawer()}\n      onKeyDown={() => toggleDrawer()}\n    >\n      <List>\n        <ListItem button key={0}>\n          <ListItemIcon>\n            <PeopleIcon />\n          </ListItemIcon>\n          <ListItemText primary={`目前線上人數：${userNumber}`} />\n        </ListItem>\n        <ListItem button key={1}>\n          <ListItemIcon>\n            <PersonIcon />\n          </ListItemIcon>\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n            }}\n          >\n            <ListItemText primary={data?.state.name} />\n            <span\n              style={{\n                fontSize: \"12px\",\n              }}\n            >{`id：${data?.state.id}`}</span>\n          </div>\n        </ListItem>\n        <Divider />\n        <ListItem button key={2}>\n          <ListItemIcon>\n            <MessageIcon />\n          </ListItemIcon>\n          <ListItemText\n            primary=\"新增聊天室\"\n            onClick={() => openCreateModalHandler()}\n          />\n        </ListItem>\n        <ListItem\n          button\n          key={3}\n          onClick={() => {\n            data?.setState(\n              (preVal) =>\n                (preVal = {\n                  ...preVal,\n                  ws: undefined,\n                  isLogout: true,\n                })\n            );\n          }}\n        >\n          <ListItemIcon>\n            <ExitToAppIcon />\n          </ListItemIcon>\n          <ListItemText\n            primary=\"離開聊天室\"\n            onClick={() => {\n              if (data?.state.ws && data.state.selectChatRoom) {\n                data.state.ws.emit(\"disconnectLobby\", {\n                  id: data.state.id,\n                  name: data.state.name,\n                });\n              }\n              // history.push(\"/\");\n            }}\n          />\n        </ListItem>\n      </List>\n    </Box>\n  );\n};\n\nexport default DrawerContent;\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport { useHistory } from \"react-router\";\nimport { chatRoomInfoType, StateContext } from \"../index\";\n\n// Components\nimport DrawerContent from \"./DrawerContent\";\nimport {\n  Alert,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Drawer,\n  Snackbar,\n  TextField,\n} from \"@mui/material\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nimport styled from \"styled-components\";\n\nconst ContainerDivStyled = styled.div`\n  .header {\n    position: relative;\n    background-color: #00d8ff;\n    color: #fff;\n    text-align: center;\n    padding: 10px;\n    letter-spacing: 5px;\n    width: 80%;\n    margin: 0 auto;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    .addIcon {\n      position: absolute;\n      right: 10px;\n      text-align: center;\n      top: 8px;\n      cursor: pointer;\n    }\n  }\n\n  .body {\n    width: 80%;\n    margin: 0 auto;\n    padding: 10px;\n    display: flex;\n    flex-wrap: wrap;\n    .chatRoom {\n      min-width: 200px;\n      margin: 5px;\n      border: 1.5px solid #000;\n      border-radius: 10px;\n      transition: all 0.3s ease-in-out;\n      cursor: pointer;\n      animation: borderChange 0.3s linear;\n      @media (max-width: 530px) {\n        width: 100%;\n      }\n      h3 {\n        text-align: center;\n        margin: 5px;\n        border-bottom: 1.5px solid #000;\n      }\n      .desc {\n        padding: 5px;\n        font-size: 12px;\n        margin: 0;\n      }\n      &:hover {\n        background-color: #e8e8e8;\n      }\n      &:active {\n        transform: scale(0.9);\n      }\n    }\n  }\n`;\n\nconst Lobby: React.FC = () => {\n  const history = useHistory();\n  const data = useContext(StateContext);\n  const [bottomDrawer, setBottomDrawer] = useState<boolean>(false);\n  const [snackbar, setSnackbar] = useState<{\n    open: boolean;\n    severity: \"error\" | \"warning\" | \"info\" | \"success\";\n    message?: string;\n  }>({\n    open: false,\n    severity: \"info\",\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [userNumber, setUserNumber] = useState<number>(0);\n  const [chatRooms, setChatRooms] = useState<chatRoomInfoType[] | []>([]);\n  const [isDialogOpen, setIsDialogOpen] = useState<boolean>(false);\n  const [newChatRoom, setNewChatRoom] = useState<{\n    name?: string;\n    desc?: string;\n  }>();\n\n  // Init\n  useEffect(\n    () => {\n      if (!data?.state.name) {\n        history.push(\"/\");\n      } else if (!data?.state.ws && !data?.state.selectChatRoom) {\n        setLoading((preVal: any) => (preVal = true));\n\n        const newSocket = io(\n          process.env.REACT_APP_API_DOMAIN\n            ? process.env.REACT_APP_API_DOMAIN\n            : \"http://localhost:3000\",\n          {\n            transports: [\"websocket\"],\n          }\n        );\n\n        if (data?.setState) {\n          data.setState(\n            (preVal) =>\n              (preVal = {\n                ...preVal,\n                ws: newSocket,\n                id: uuidv4(),\n              })\n          );\n        }\n      } else if (data.state.ws && data.state.name) {\n        data.state.ws.emit(\"updateInfo\");\n      }\n\n      // 這邊不能用 Return 不然進入房間也會觸發這邊然後清掉 WS\n      // return () => {\n      //   console.log(\"newSocket.close()\");\n\n      //   newSocket.close();\n      // };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  // 監聽 WS\n  useEffect(\n    () => {\n      if (data?.state.ws) {\n        //連線成功在 console 中打印訊息\n        console.log(\"success connect!\");\n        //設定監聽\n        initWebSocket();\n      }\n\n      return () => {\n        if (data?.state.ws && data?.state.isLogout) {\n          setLoading((preVal: any) => (preVal = true));\n\n          data.state.ws.emit(\"logout\", {\n            id: data?.state.id,\n            name: data?.state.name,\n          });\n\n          data?.setState(\n            (preVal) =>\n              (preVal = {\n                ...preVal,\n                name: null,\n                id: undefined,\n              })\n          );\n\n          setSnackbar(\n            (preVal) =>\n              (preVal = {\n                open: true,\n                severity: \"info\",\n                message: \"登出成功\",\n              })\n          );\n\n          setTimeout(() => {\n            setSnackbar(\n              (preVal) =>\n                (preVal = {\n                  ...preVal,\n                  open: false,\n                })\n            );\n          }, 2000);\n\n          setTimeout(() => {\n            setLoading((preVal: any) => (preVal = false));\n            history.push(\"/\");\n          }, 1000);\n        }\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [data?.state.ws]\n  );\n\n  // WS Function\n\n  const initWebSocket = useCallback(() => {\n    data?.setState(\n      (preVal) =>\n        (preVal = {\n          ...preVal,\n        })\n    );\n\n    if (data?.state.ws) {\n      if (!data.state.selectChatRoom) {\n        // 傳送 login 到 Socket.io\n        data.state.ws.emit(\"login\", {\n          id: data?.state.id,\n          name: data?.state.name,\n        });\n      }\n\n      // 連線成功\n      data.state.ws.once(\"connectionSuccess\", (data) => {\n        setSnackbar(\n          (preVal) =>\n            (preVal = {\n              open: true,\n              severity: \"success\",\n              message: data.message,\n            })\n        );\n\n        setTimeout(() => {\n          setSnackbar(\n            (preVal) =>\n              (preVal = {\n                ...preVal,\n                open: false,\n              })\n          );\n        }, 2000);\n\n        setLoading((preVal: any) => (preVal = false));\n      });\n\n      // 連線失敗\n      data.state.ws.once(\"connectionFail\", (data) => {\n        setSnackbar(\n          (preVal) =>\n            (preVal = {\n              open: true,\n              severity: \"error\",\n              message: data.message,\n            })\n        );\n        setTimeout(() => {\n          history.push(\"/\");\n        }, 1000);\n      });\n\n      // 更新線上人數\n      data.state.ws.on(\"updateInfo\", (data) => {\n        setUserNumber(data.userNumber);\n        setChatRooms(data.chatRooms);\n      });\n\n      // 接收個人訊息\n      data.state.ws.on(\"personalAnnouncement\", (dataInfo) => {\n        const { data } = dataInfo;\n\n        setSnackbar(\n          (preVal) =>\n            (preVal = {\n              open: true,\n              severity:\n                data.text === \"新增成功\"\n                  ? \"success\"\n                  : data.text === \"新增失敗\"\n                  ? \"error\"\n                  : \"info\",\n              message: data.text,\n            })\n        );\n\n        setTimeout(() => {\n          setSnackbar(\n            (preVal) =>\n              (preVal = {\n                ...preVal,\n                open: false,\n              })\n          );\n        }, 2000);\n      });\n    }\n  }, [data?.state.ws]);\n\n  // 加入聊天室\n  const joinChatRoomHandler = (chatRoom: chatRoomInfoType) => {\n    data?.setState(\n      (preVal) =>\n        (preVal = {\n          ...preVal,\n          selectChatRoom: chatRoom,\n        })\n    );\n\n    history.push({\n      pathname: `/chat-room/${chatRoom.id}`,\n    });\n  };\n\n  // 開關抽屜\n  const toggleDrawer = () => {\n    setBottomDrawer((bottomDrawer) => (bottomDrawer = !bottomDrawer));\n  };\n\n  // 開啟關閉新增聊天室彈窗\n  const toggleDialogHandler = () => {\n    setIsDialogOpen(!isDialogOpen);\n    setNewChatRoom({\n      name: undefined,\n      desc: undefined,\n    });\n  };\n\n  return (\n    <ContainerDivStyled>\n      {loading ? (\n        <></>\n      ) : (\n        <>\n          <header className=\"header\">\n            <label className=\"title\">Lobby</label>\n            <MenuIcon\n              className=\"addIcon\"\n              onClick={() => toggleDrawer()}\n            ></MenuIcon>\n            <Drawer\n              anchor=\"bottom\"\n              open={bottomDrawer}\n              onClose={() => toggleDrawer()}\n            >\n              <DrawerContent\n                toggleDrawer={toggleDrawer}\n                userNumber={userNumber}\n                openCreateModalHandler={() => toggleDialogHandler()}\n              ></DrawerContent>\n            </Drawer>\n\n            <Dialog open={isDialogOpen} onClose={() => toggleDialogHandler()}>\n              <DialogTitle>新增聊天室</DialogTitle>\n              <DialogContent>\n                <DialogContentText>\n                  請遵守不犯法，不色情，且盡情地聊天吧！\n                </DialogContentText>\n                <TextField\n                  autoFocus\n                  margin=\"dense\"\n                  id=\"chatRoomName\"\n                  label=\"聊天室名稱\"\n                  type=\"chatRoomName\"\n                  fullWidth\n                  variant=\"standard\"\n                  onChange={(e) => {\n                    setNewChatRoom(\n                      (preVal) =>\n                        (preVal = {\n                          ...preVal,\n                          name: e.target.value,\n                        })\n                    );\n                  }}\n                />\n                <TextField\n                  margin=\"dense\"\n                  id=\"chatRoomDesc\"\n                  label=\"聊天室敘述\"\n                  type=\"chatRoomDesc\"\n                  fullWidth\n                  variant=\"standard\"\n                  onChange={(e) => {\n                    setNewChatRoom(\n                      (preVal) =>\n                        (preVal = {\n                          ...preVal,\n                          desc: e.target.value,\n                        })\n                    );\n                  }}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={() => toggleDialogHandler()}>取消</Button>\n                <Button\n                  onClick={() => {\n                    if (!data?.state.id && !newChatRoom?.name) return;\n\n                    if (data?.state.ws) {\n                      data.state.ws.emit(\"createNewChatRoom\", {\n                        userId: data.state.id,\n                        ...newChatRoom,\n                      });\n                    }\n\n                    toggleDialogHandler();\n                  }}\n                >\n                  創建\n                </Button>\n              </DialogActions>\n            </Dialog>\n          </header>\n\n          <section className=\"body\">\n            {chatRooms.map((chatRoom, idx) => {\n              return (\n                <div\n                  className=\"chatRoom\"\n                  key={idx}\n                  onClick={() => joinChatRoomHandler(chatRoom)}\n                >\n                  <div className=\"chatRoom__content\">\n                    <h3>{chatRoom.name}</h3>\n                    <p className=\"desc\">{chatRoom.desc}</p>\n                  </div>\n                </div>\n              );\n            })}\n          </section>\n        </>\n      )}\n      <Snackbar\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n        open={snackbar.open}\n        onClose={() =>\n          setSnackbar(\n            (preVal) =>\n              (preVal = {\n                ...preVal,\n                open: false,\n              })\n          )\n        }\n        key={0}\n        autoHideDuration={2000}\n      >\n        <Alert\n          onClose={() =>\n            setSnackbar(\n              (preVal) =>\n                (preVal = {\n                  ...preVal,\n                  open: false,\n                })\n            )\n          }\n          severity={snackbar.severity}\n          sx={{ width: \"100%\" }}\n        >\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </ContainerDivStyled>\n  );\n};\n\nexport default Lobby;\n","export default __webpack_public_path__ + \"static/media/bg.658d320a.png\";","export default __webpack_public_path__ + \"static/media/defaultUser.b55ae646.png\";","import React, { useContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\n\nimport styled from \"styled-components\";\n\nimport { StateContext } from \"../index\";\n\n// Components\nimport ArrowLeftIcon from \"@material-ui/icons/KeyboardArrowLeft\";\nimport ArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\nimport CallIcon from \"@material-ui/icons/Call\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport MicIcon from \"@material-ui/icons/Mic\";\nimport SendIcon from \"@material-ui/icons/Send\";\n\nimport bgPng from \"../../assets/images/bg.png\";\nimport { MessageType } from \"./ChatRoom\";\nimport defaultUser from \"../../assets/images/defaultUser.png\";\n\nconst ContainerDivStyled = styled.div`\n  display: grid;\n  grid-template-rows: 60px auto 50px;\n  height: 100vh;\n  .header {\n    width: 100%;\n    height: 60px;\n    color: #fff;\n    background-color: rgb(34, 42, 62);\n    position: fixed;\n    top: 0;\n    display: grid;\n    grid-template-columns: 80px 1fr 80px;\n    z-index: 2;\n    .title {\n      text-align: center;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    &__icon {\n      display: flex;\n      align-items: center;\n      &:last-child {\n        justify-content: space-around;\n      }\n    }\n  }\n  .body {\n    position: relative;\n    height: calc(100vh - 110px);\n    padding: 60px 0 50px 0;\n    background-image: url(${bgPng});\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-position: center;\n    overflow-y: auto;\n    overscroll-behavior: none;\n    .msgBox {\n      &__ul {\n        display: flex;\n        padding: 10px;\n        list-style: none;\n        margin: 0;\n      }\n      &__profile {\n        margin: 2px;\n        width: 50px;\n        height: 50px;\n        background-color: #fff;\n        border-radius: 50%;\n        overflow: hidden;\n        .img {\n          width: 100%;\n          height: 100%;\n          display: inline-block;\n          object-fit: cover;\n        }\n      }\n      &__body {\n        position: relative;\n        padding-left: 5px;\n        flex-shrink: 100;\n        .name {\n          font-size: 12px;\n          color: #fff;\n          margin-bottom: 4px;\n        }\n        .msg {\n          background-color: #fff;\n          border-radius: 10px;\n          padding: 5px;\n          font-size: 14px;\n          margin-left: 8px;\n          position: relative;\n          &:after {\n            content: \"\";\n            display: inline-block;\n            position: absolute;\n            width: 0;\n            height: 0;\n            border-style: solid;\n            border-width: 6.5px 12px 6.5px 0;\n            border-color: transparent #fff transparent transparent;\n            left: -10px;\n            top: 12px;\n          }\n        }\n      }\n      &__date {\n        font-size: 12px;\n        display: flex;\n        align-items: flex-end;\n        padding-left: 5px;\n        color: #fff;\n        flex-shrink: 40;\n      }\n      &-user {\n        ul {\n          flex-direction: row-reverse;\n        }\n        .msgBox__body {\n          padding-right: 5px;\n          .name {\n            text-align: right;\n          }\n          .msg {\n            margin-right: 8px;\n            background-color: rgb(134, 217, 123);\n            &:after {\n              border-width: 6.5px 0 6.5px 12px;\n              border-color: transparent transparent transparent\n                rgb(134, 217, 123);\n              left: auto;\n              right: -10px;\n              top: 12px;\n            }\n          }\n        }\n      }\n      &-announcement {\n        text-align: center;\n        padding: 5px;\n        color: #fff;\n        > div {\n          padding: 10px;\n          background-color: #00000030;\n          display: inline-block;\n          border-radius: 50px;\n          font-size: 14px;\n        }\n      }\n    }\n  }\n  .footer {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 40px;\n    background-color: #fff;\n    z-index: 2;\n    display: grid;\n    grid-template-columns: 100px 1fr 40px;\n    padding: 5px 0;\n    &__icon {\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n      color: #807777;\n    }\n    .input {\n      border: none;\n      background-color: #eeeeee;\n      border-radius: 20px;\n      padding: 0 10px;\n      &:focus {\n        outline: none;\n      }\n    }\n  }\n`;\n\nconst ChatRoom: React.FC = () => {\n  const history = useHistory();\n  const data = useContext(StateContext);\n  const moment = require(\"moment\");\n  const [inputMsg, setInputMsg] = useState(\"\");\n  const [messages, setMessages] = useState<MessageType[] | []>([]);\n  const loading = useState(false)[0];\n\n  // 初始化\n  useEffect(() => {\n    if (!data?.state.id || !data?.state.name || !data?.state.selectChatRoom) {\n      history.push(\"/lobby\");\n    }\n\n    if (data?.state.ws && data?.state.selectChatRoom) {\n      data.state.ws.emit(\"joinChatRoom\", {\n        id: data.state.id,\n        name: data.state.name,\n        roomId: data.state.selectChatRoom.id,\n      });\n\n      // 初始化事件\n      initWebSocket();\n    }\n\n    return () => {\n      disconnectChatRoomHandler();\n    };\n  }, []);\n\n  // 初始化\n  const initWebSocket = () => {\n    if (data?.state.ws && data?.state.selectChatRoom) {\n      // 該房間的事件監聽\n      data.state.ws.on(\"roomMsgEmit\", (dataInfo: MessageType) => {\n        const { id, name, data, create_at } = dataInfo;\n        setMessages((preVal) => [\n          ...preVal,\n          {\n            id,\n            name,\n            data,\n            create_at,\n          },\n        ]);\n      });\n\n      // 公告監聽\n      data.state.ws.on(\"announcement\", (dataInfo: MessageType) => {\n        const { id, name, data, create_at } = dataInfo;\n        setMessages((preVal) => [\n          ...preVal,\n          {\n            id,\n            name,\n            data,\n            create_at,\n          },\n        ]);\n      });\n    }\n  };\n\n  // 離開房間\n  const disconnectChatRoomHandler = () => {\n    if (data?.state.ws && data.state.selectChatRoom) {\n      data.state.ws.emit(\"disconnectChatRoom\", {\n        id: data.state.id,\n        name: data.state.name,\n        roomId: data.state.selectChatRoom.id,\n      });\n    }\n  };\n\n  // 渲染對話\n  const renderMessageHandler = (message: MessageType) => {\n    switch (message.data.type) {\n      case \"text\":\n        return (\n          <ul className=\"msgBox__ul\">\n            <li className=\"msgBox__profile\">\n              <img className=\"img\" src={defaultUser} alt=\"User Profile\" />\n            </li>\n            <li className=\"msgBox__body\">\n              <div className=\"name\">{message.name}</div>\n              <div className=\"msg\">{message.data.text}</div>\n            </li>\n            <li className=\"msgBox__date\">{message.create_at}</li>\n          </ul>\n        );\n      case \"image\":\n        return (\n          <ul className=\"msgBox__ul\">\n            <li className=\"msgBox__profile\">\n              <img className=\"img\" src={defaultUser} alt=\"User Profile\" />\n            </li>\n            <li className=\"msgBox__body\">\n              <div className=\"name\">{message.name}</div>\n              <div className=\"msg\">尚未支援圖片</div>\n            </li>\n            <li className=\"msgBox__date\">{message.create_at}</li>\n          </ul>\n        );\n      case \"voice\":\n        return (\n          <ul className=\"msgBox__ul\">\n            <li className=\"msgBox__profile\">\n              <img className=\"img\" src={defaultUser} alt=\"User Profile\" />\n            </li>\n            <li className=\"msgBox__body\">\n              <div className=\"name\">{message.name}</div>\n              <div className=\"msg\">尚未支援圖片</div>\n            </li>\n            <li className=\"msgBox__date\">{message.create_at}</li>\n          </ul>\n        );\n      default:\n        return <></>;\n    }\n  };\n\n  return (\n    <ContainerDivStyled>\n      <header className=\"header\">\n        <span className=\"header__icon\">\n          <ArrowLeftIcon\n            className=\"cursor-pointer\"\n            onClick={() => {\n              history.push(\"/lobby\");\n            }}\n          />\n        </span>\n        <span className=\"title\">\n          {data?.state.selectChatRoom\n            ? data?.state.selectChatRoom.name\n            : \"unKnow Room Name\"}\n        </span>\n        <div className=\"header__icon\">\n          <CallIcon className=\"cursor-pointer\" />\n          <ArrowDownIcon className=\"cursor-pointer\" />\n        </div>\n      </header>\n      <section className=\"body\">\n        {messages.map((message, idx) => {\n          if (message.id === \"announcement\") {\n            return (\n              <div className=\"msgBox-announcement\" key={message.id + idx}>\n                <div>\n                  {message.data.type === \"text\"\n                    ? message.data.text\n                    : \"TODO: 公告現在只支援文字\"}\n                </div>\n              </div>\n            );\n          } else {\n            return (\n              <div\n                className={`${\n                  message.id === data?.state.id\n                    ? \"msgBox-user\"\n                    : \"msgBox-others\"\n                } msgBox`}\n                key={idx}\n              >\n                {renderMessageHandler(message)}\n              </div>\n            );\n          }\n        })}\n      </section>\n      <section className=\"footer\">\n        <div className=\"footer__icon\">\n          <AddIcon className=\"cursor-pointer\" />\n          <PhotoCameraIcon className=\"cursor-pointer\" />\n          <ImageIcon className=\"cursor-pointer\" />\n        </div>\n        <input\n          type=\"text\"\n          className=\"input\"\n          placeholder=\"Aa\"\n          onChange={(e) => {\n            setInputMsg((preVal) => (preVal = e.target.value));\n          }}\n          value={inputMsg}\n        />\n        <div className=\"footer__icon\">\n          {inputMsg ? (\n            <SendIcon\n              className=\"cursor-pointer\"\n              style={{\n                color: \"#6682ec\",\n              }}\n              onClick={() => {\n                if (!inputMsg || loading) return;\n\n                if (data?.state.ws && data.state.selectChatRoom) {\n                  data.state.ws.emit(\"clientSendMessage\", {\n                    id: data.state.id,\n                    name: data.state.name,\n                    data: {\n                      type: \"text\",\n                      text: inputMsg,\n                    },\n                    create_at: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n                    modeInfo: {\n                      mode: \"room\",\n                      roomId: data.state.selectChatRoom.id,\n                    },\n                  });\n                }\n                setInputMsg((preVal) => (preVal = \"\"));\n              }}\n            />\n          ) : (\n            <MicIcon className=\"cursor-pointer\" />\n          )}\n        </div>\n      </section>\n    </ContainerDivStyled>\n  );\n};\n\nexport default ChatRoom;\n","import App from \"../App\";\nimport Lobby from \"../pages/Lobby\";\nimport ChatRoom from \"../pages/ChatRoom\";\n\n//TS\nexport type routeType = {\n  path: string;\n  component: any;\n  exact?: boolean;\n  routes?: routeType[];\n};\n\nconst routers = [\n  {\n    path: \"/\",\n    component: App,\n    exact: true,\n  },\n  {\n    path: \"/lobby\",\n    component: Lobby,\n    exact: true,\n  },\n  {\n    path: \"/chat-room/:id\",\n    component: ChatRoom,\n    exact: true,\n  },\n];\n\nexport default routers;\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\n\n// TS\nimport { routeType } from \".\";\n\nconst RouteWithSubRoutes = (route: routeType) => {\n  return (\n    <Route\n      {...route}\n      path={route.path}\n      render={(props) => (\n        // pass the sub-routes down to keep nesting\n        <route.component {...props} routes={route.routes} />\n      )}\n    />\n  );\n};\n\nexport default RouteWithSubRoutes;\n","import React, { createContext, useState } from \"react\";\n\nimport { BrowserRouter as Router, Switch } from \"react-router-dom\";\nimport { Socket } from \"socket.io-client\";\nimport routers from \"../../routers/index\";\nimport RouteWithSubRoutes from \"../../routers/RouteWithSubRoutes\";\n\n// TS\ninterface StateType {\n  name: string | null;\n  id?: string;\n  ws?: Socket;\n  chatRoomInfo: chatRoomInfoType[] | [];\n  selectChatRoom?: chatRoomInfoType;\n  isLogout: boolean;\n}\n\nexport type chatRoomInfoType = {\n  id: string;\n  name: string;\n  desc: string;\n};\n\nexport const StateContext = createContext<{\n  state: StateType;\n  setState: React.Dispatch<React.SetStateAction<StateType>>;\n} | null>(null);\n\nconst Index: React.FC = () => {\n  const [state, setState] = useState<StateType>({\n    name: null,\n    chatRoomInfo: [],\n    isLogout: false,\n  });\n  return (\n    <StateContext.Provider\n      value={{\n        state,\n        setState,\n      }}\n    >\n      <Router basename=\"/Socketio-Client\">\n        <Switch>\n          {routers.map((route, i) => (\n            <RouteWithSubRoutes key={i} {...route} />\n          ))}\n        </Switch>\n      </Router>\n    </StateContext.Provider>\n  );\n};\n\nexport default Index;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Index from \"./pages/index\";\nimport \"./index.css\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Index />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}